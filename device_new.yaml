config:
  register_address_type: u8
  default_byte_order: BE
  defmt_feature: "defmt"

# --- Power Control Registers (0x00 - 0x3F, some are reserved) ---
PowerStatus: # REG00H
  type: register
  address: 0x00
  size_bits: 8
  access: RO
  description: |
    Indicates the input power source status (ACIN, VBUS), battery current direction,
    and other power-related conditions.
  fields:
    acin_present:
      base: bool
      start: 7
      description: "ACIN physical presence status (true: voltage detected, false: no voltage detected)."
    acin_usable:
      base: bool
      start: 6
      description: "ACIN usability status (true: ACIN voltage is valid for system use, false: ACIN voltage is not valid/sufficient)."
    vbus_present:
      base: bool
      start: 5
      description: "VBUS physical presence status (true: voltage detected, false: no voltage detected)."
    vbus_usable:
      base: bool
      start: 4
      description: "VBUS usability status (true: VBUS voltage is valid for system use, false: VBUS voltage is not valid/sufficient)."
    vbus_voltage_above_vhold_when_connected:
      base: bool
      start: 3
      description: "Indicates if VBUS voltage was greater than VHOLD when VBUS was connected (true: VBUS > VHOLD, false: VBUS <= VHOLD or not applicable)."
    battery_is_charging:
      base: bool
      start: 2
      description: "Battery current direction (true: Battery is Charging, false: Battery is Discharging)."
    acin_and_vbus_inputs_shorted_on_pcb:
      base: bool
      start: 1
      description: "Indicates if ACIN and VBUS inputs are short-circuited on the PCB (true: short-circuited detected, false: no short-circuit)."
    boot_source_was_acin_or_vbus:
      base: bool
      start: 0
      description: "Indicates if the boot-up power source was ACIN or VBUS (true: boot from ACIN/VBUS, false: boot from Battery or other)."

ChargeStatus: # REG01H
  type: register
  address: 0x01
  size_bits: 8
  access: RO
  description: |
    Indicates various operational modes and charging statuses, including AXP192 temperature,
    battery presence, and charging progress.
  fields:
    axp192_over_temperature:
      base: bool
      start: 7
      description: "AXP192 over-temperature status (true: over-temperature, false: normal temperature)."
    charging_in_progress:
      base: bool
      start: 6
      description: "Charging progress status (true: charging is in progress, false: not charging or charge complete)."
    battery_connected:
      base: bool
      start: 5
      description: "Battery connection status (true: battery is connected, false: no battery connected)."
    # Bit 4 is reserved.
    battery_in_activation_mode:
      base: bool
      start: 3
      description: "Battery activation mode status (true: battery is in activation mode, false: not in activation mode)."
    charge_current_less_than_expected:
      base: bool
      start: 2
      description: "Indicates if actual charging current is less than the set/expected current (true: actual < expected, false: actual >= expected)."
    axp192_startup_mode_is_b:
      base: bool
      start: 1
      description: "AXP192 startup mode (true: Mode B, false: Mode A)."
    # Bit 0 is reserved.

OtgVbusStatus: # REG04H (Corrected from 02H based on summary table)
  type: register
  address: 0x04
  size_bits: 8
  access: RO
  description: "Indicates the status of VBUS when operating in USB OTG (On-The-Go) mode."
  fields:
    # Bits 7-3 are reserved.
    vbus_is_valid:
      base: bool
      start: 2
      description: "VBUS validity status in OTG mode (true: VBUS is valid, false: VBUS is not valid)."
    vbus_session_ab_is_valid:
      base: bool
      start: 1
      description: "VBUS Session A/B validity status (true: Session A/B is valid, false: Session A/B is not valid)."
    vbus_session_ended:
      base: bool
      start: 0
      description: "VBUS Session End status (true: Session has ended, false: Session is ongoing or not started)."

DataBuffer0: # REG06H
  type: register
  address: 0x06
  size_bits: 8
  access: RW
  reset_value: 0xF0
  description: |
    General purpose data buffer for system data storage.
    Note: Retained as long as any AXP192 power source is present (not affected by host on/off).
  fields:
    value:
      base: uint
      start: 0
      end: 8
      description: "8-bit data value."

DataBuffer1: # REG07H
  type: ref
  target: DataBuffer0
  override:
    type: register
    address: 0x07
    reset_value: 0x0F

DataBuffer2: # REG08H
  type: ref
  target: DataBuffer0
  override:
    type: register
    address: 0x08
    reset_value: 0x00

DataBuffer3: # REG09H
  type: ref
  target: DataBuffer0
  override:
    type: register
    address: 0x09
    reset_value: 0xFF

DataBuffer4: # REG0AH
  type: ref
  target: DataBuffer0
  override:
    type: register
    address: 0x0A
    reset_value: 0x00

DataBuffer5: # REG0BH
  type: ref
  target: DataBuffer0
  override:
    type: register
    address: 0x0B
    reset_value: 0x00

ExtenDcDc2Control: # REG10H
  type: register
  address: 0x10
  size_bits: 8
  access: RW
  # reset_value: is omitted as datasheet indicates XXH (customizable)
  description: |
    Controls the output enable state for the EXTEN pin and the DC-DC2 converter.
    Note: The default power-on state of these outputs (reset value) is hardware-dependent (XXH in datasheet)
    and may vary based on chip customization or revision.
  fields:
    # Bits 7-3 are reserved.
    exten_output_enable:
      base: bool
      start: 2
      description: "EXTEN pin output switch control (true: enabled/on, false: disabled/off)."
    # Bit 1 is reserved.
    dcdc2_output_enable:
      base: bool
      start: 0
      description: "DC-DC2 converter output switch control (true: enabled/on, false: disabled/off)."

PowerOutputControl: # REG12H
  type: register
  address: 0x12
  size_bits: 8
  access: RW
  # reset_value: is omitted as datasheet indicates XXH (customizable)
  description: |
    Controls output enable for DC-DC1, DC-DC3, LDO2, LDO3, and provides alternative controls for EXTEN and DC-DC2.
    Note: The default power-on state of these outputs (reset value XXH) is hardware-dependent
    and may vary based on chip customization or revision.
    IMPORTANT: REG12H bit 6 (exten_output_enable) is linked to REG10H bit 2.
                 REG12H bit 4 (dcdc2_output_enable) is linked to REG10H bit 0.
                 These pairs control the same underlying hardware function.
  fields:
    # Bit 7 is reserved.
    exten_output_enable:
      base: bool
      start: 6
      description: "EXTEN pin output switch control (true: enabled, false: disabled). Linked to REG10H[2]."
    # Bit 5 is reserved.
    dcdc2_output_enable:
      base: bool
      start: 4
      description: "DC-DC2 converter output switch control (true: enabled, false: disabled). Linked to REG10H[0]."
    ldo3_output_enable:
      base: bool
      start: 3
      description: "LDO3 output switch control (true: enabled, false: disabled)."
    ldo2_output_enable:
      base: bool
      start: 2
      description: "LDO2 output switch control (true: enabled, false: disabled)."
    dcdc3_output_enable:
      base: bool
      start: 1
      description: "DC-DC3 converter output switch control (true: enabled, false: disabled)."
    dcdc1_output_enable:
      base: bool
      start: 0
      description: "DC-DC1 converter output switch control (true: enabled, false: disabled)."

DcDc2VoltageSetting: # REG23H
  type: register
  address: 0x23
  size_bits: 8
  access: RW
  reset_value: 0x16 # Default 0x16 (bits 5-0 = 010110B = 22d) corresponds to 1.25V.
  description: |
    Sets the output voltage for the DC-DC2 converter.
    Formula: Output Voltage (V) = 0.7 + (voltage_setting_raw * 0.025).
    Effective range for voltage_setting_raw (bits 0-5): 0-63.
    Resulting voltage range: 0.7V to 2.275V, in 25mV steps.
  fields:
    # Bits 7-6 are reserved.
    voltage_setting_raw:
      base: uint
      start: 0
      end: 6 # 6 bits (0 to 5 inclusive)
      description: "Raw 6-bit value for DC-DC2 output voltage setting. See register description for conversion formula."

DcDc2VrcParameter: # REG25H
  type: register
  address: 0x25
  size_bits: 8
  access: RW
  reset_value: 0x00 # Default: VRC enabled (bit 2=0), Rise slope 1.6mV/us (bit 0=0)
  description: |
    Configures parameters for DC-DC2 Dynamic Voltage Scaling / Voltage Ramp Control (VRC),
    including VRC enable state and voltage rise slope.
  fields:
    # Bits 7-3 are reserved.
    vrc_disabled: # Naming reflects the bit's meaning: true if VRC is disabled
      base: bool
      start: 2
      description: "DC-DC2 VRC (Voltage Ramp Control) disable control (true: VRC disabled, false: VRC enabled). Note inverted logic."
    # Bit 1 is reserved.
    vrc_rise_slope_is_0_8mv_us: # Naming reflects the bit's meaning for true state
      base: bool
      start: 0
      description: "DC-DC2 VRC voltage rise slope (true: 0.8mV/us (25mV/31.25us), false: 1.6mV/us (25mV/15.625us))."

DcDc1VoltageSetting: # REG26H
  type: register
  address: 0x26
  size_bits: 8
  access: RW
  reset_value: 0x68 # Default 0x68 (bits 6-0 = 1101000B = 104d) corresponds to 3.3V.
  description: |
    Sets the output voltage for the DC-DC1 converter.
    Formula: Output Voltage (V) = 0.7 + (voltage_setting_raw * 0.025).
    Effective range for voltage_setting_raw (bits 0-6): 0-112 (decimal).
    Resulting voltage range: 0.7V to 3.5V, in 25mV steps.
    Values for voltage_setting_raw from 113 to 127 may be reserved or have undefined behavior.
  fields:
    # Bit 7 is reserved.
    voltage_setting_raw:
      base: uint
      start: 0
      end: 7 # 7 bits (0 to 6 inclusive)
      description: "Raw 7-bit value for DC-DC1 output voltage setting. See register description for conversion formula and valid range."

DcDc3VoltageSetting: # REG27H
  type: register
  address: 0x27
  size_bits: 8
  access: RW
  reset_value: 0x48 # Default 0x48 (bits 6-0 = 1001000B = 72d) corresponds to 2.5V.
  description: |
    Sets the output voltage for the DC-DC3 converter.
    Formula: Output Voltage (V) = 0.7 + (voltage_setting_raw * 0.025).
    Effective range for voltage_setting_raw (bits 0-6): 0-112 (decimal).
    Resulting voltage range: 0.7V to 3.5V, in 25mV steps.
    Values for voltage_setting_raw from 113 to 127 may be reserved or have undefined behavior.
  fields:
    # Bit 7 is reserved.
    voltage_setting_raw:
      base: uint
      start: 0
      end: 7 # 7 bits (0 to 6 inclusive)
      description: "Raw 7-bit value for DC-DC3 output voltage setting. See register description for conversion formula and valid range."