config:
  register_address_type: u8
  default_byte_order: BE
  defmt_feature: "defmt"

# --- Power Control Registers (0x00 - 0x3F, some are reserved) ---
PowerStatus: # REG00H
  type: register
  address: 0x00
  size_bits: 8
  access: RO
  description: |
    Indicates the input power source status (ACIN, VBUS), battery current direction,
    and other power-related conditions.
  fields:
    acin_present:
      base: bool
      start: 7
      description: "ACIN physical presence status (true: voltage detected, false: no voltage detected)."
    acin_usable:
      base: bool
      start: 6
      description: "ACIN usability status (true: ACIN voltage is valid for system use, false: ACIN voltage is not valid/sufficient)."
    vbus_present:
      base: bool
      start: 5
      description: "VBUS physical presence status (true: voltage detected, false: no voltage detected)."
    vbus_usable:
      base: bool
      start: 4
      description: "VBUS usability status (true: VBUS voltage is valid for system use, false: VBUS voltage is not valid/sufficient)."
    vbus_voltage_above_vhold_when_connected:
      base: bool
      start: 3
      description: "Indicates if VBUS voltage was greater than VHOLD when VBUS was connected (true: VBUS > VHOLD, false: VBUS <= VHOLD or not applicable)."
    battery_is_charging:
      base: bool
      start: 2
      description: "Battery current direction (true: Battery is Charging, false: Battery is Discharging)."
    acin_and_vbus_inputs_shorted_on_pcb:
      base: bool
      start: 1
      description: "Indicates if ACIN and VBUS inputs are short-circuited on the PCB (true: short-circuited detected, false: no short-circuit)."
    boot_source_was_acin_or_vbus:
      base: bool
      start: 0
      description: "Indicates if the boot-up power source was ACIN or VBUS (true: boot from ACIN/VBUS, false: boot from Battery or other)."

ChargeStatus: # REG01H
  type: register
  address: 0x01
  size_bits: 8
  access: RO
  description: |
    Indicates various operational modes and charging statuses, including AXP192 temperature,
    battery presence, and charging progress.
  fields:
    axp192_over_temperature:
      base: bool
      start: 7
      description: "AXP192 over-temperature status (true: over-temperature, false: normal temperature)."
    charging_in_progress:
      base: bool
      start: 6
      description: "Charging progress status (true: charging is in progress, false: not charging or charge complete)."
    battery_connected:
      base: bool
      start: 5
      description: "Battery connection status (true: battery is connected, false: no battery connected)."
    # Bit 4 is reserved.
    battery_in_activation_mode:
      base: bool
      start: 3
      description: "Battery activation mode status (true: battery is in activation mode, false: not in activation mode)."
    charge_current_less_than_expected:
      base: bool
      start: 2
      description: "Indicates if actual charging current is less than the set/expected current (true: actual < expected, false: actual >= expected)."
    axp192_startup_mode_is_b:
      base: bool
      start: 1
      description: "AXP192 startup mode (true: Mode B, false: Mode A)."
    # Bit 0 is reserved.

OtgVbusStatus: # REG04H (Corrected from 02H based on summary table)
  type: register
  address: 0x04
  size_bits: 8
  access: RO
  description: "Indicates the status of VBUS when operating in USB OTG (On-The-Go) mode."
  fields:
    # Bits 7-3 are reserved.
    vbus_is_valid:
      base: bool
      start: 2
      description: "VBUS validity status in OTG mode (true: VBUS is valid, false: VBUS is not valid)."
    vbus_session_ab_is_valid:
      base: bool
      start: 1
      description: "VBUS Session A/B validity status (true: Session A/B is valid, false: Session A/B is not valid)."
    vbus_session_ended:
      base: bool
      start: 0
      description: "VBUS Session End status (true: Session has ended, false: Session is ongoing or not started)."

DataBuffer0: # REG06H
  type: register
  address: 0x06
  size_bits: 8
  access: RW
  reset_value: 0xF0
  description: |
    General purpose data buffer for system data storage.
    Note: Retained as long as any AXP192 power source is present (not affected by host on/off).
  fields:
    value:
      base: uint
      start: 0
      end: 8
      description: "8-bit data value."

DataBuffer1: # REG07H
  type: ref
  target: DataBuffer0
  override:
    type: register
    address: 0x07
    reset_value: 0x0F

DataBuffer2: # REG08H
  type: ref
  target: DataBuffer0
  override:
    type: register
    address: 0x08
    reset_value: 0x00

DataBuffer3: # REG09H
  type: ref
  target: DataBuffer0
  override:
    type: register
    address: 0x09
    reset_value: 0xFF

DataBuffer4: # REG0AH
  type: ref
  target: DataBuffer0
  override:
    type: register
    address: 0x0A
    reset_value: 0x00

DataBuffer5: # REG0BH
  type: ref
  target: DataBuffer0
  override:
    type: register
    address: 0x0B
    reset_value: 0x00