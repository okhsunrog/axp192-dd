config:
  register_address_type: u8
  command_address_type: u8
  buffer_address_type: u8
  default_byte_order: BE
  default_bit_order: LSB0
  defmt_feature: "defmt-03"

PowerStatus:
  type: register
  address: 0x00
  size_bits: 8
  access: RO
  description: |
    Input power status register.
    Indicates the presence and usability of ACIN and VBUS, along with other power-related statuses.
    Refer to AXP192 datasheet page 32 for full details.
  fields:
    acin_present:
      base: bool
      start: 7
      description: "ACIN presence (1: present)"
    acin_usable:
      base: bool
      start: 6
      description: "ACIN usable (1: usable)"
    vbus_present:
      base: bool
      start: 5
      description: "VBUS presence (1: present)"
    vbus_usable:
      base: bool
      start: 4
      description: "VBUS usable (1: usable)"
    vbus_path_used_when_vbus_lt_vhold:
      base: bool
      start: 3
      description: "VBUS input path status when VBUS < VHOLD (0: not selected, 1: selected)"
    battery_current_direction:
      base: bool
      start: 2
      description: "Battery current (0: Discharging, 1: Charging)"
    boot_source_acin_vbus:
      base: bool
      start: 1
      description: "Boot source (0: from Battery, 1: from ACIN/VBUS)"
    acin_vbus_short_circuit_indication:
      base: bool
      start: 0
      description: "ACIN/VBUS short circuit indication (0: No, 1: Yes)"

ChargeStatus:
  type: register
  address: 0x01
  size_bits: 8
  access: RO
  description: |
    Power mode and charging status register.
    Indicates over-temperature, charging status, battery presence, and other charging-related statuses.
    Refer to AXP192 datasheet page 33 for full details.
  fields:
    over_temperature_indication:
      base: bool
      start: 7
      description: "AXP192 over-temperature (1: Yes)"
    battery_charging_indication:
      base: bool
      start: 6
      description: "Battery is charging (1: Yes)"
    battery_present_status:
      base: bool
      start: 5
      description: "Battery presence status (0: No battery, 1: Battery connected)"
    battery_activation_mode_indication:
      base: bool
      start: 3
      description: "Battery in activation mode (1: Yes)"
    charge_current_low_indication:
      base: bool
      start: 2
      description: "Charge current less than expected (1: Yes)"
    axp192_startup_mode:
      base: bool
      start: 1
      description: "AXP192 startup mode (0: Mode A, 1: Mode B)"

Ldo23Voltage:
  type: register
  address: 0x28
  size_bits: 8
  access: RW
  reset_value: 0xCF
  description: |
    LDO2 and LDO3 output voltage configurations (1.8-3.3V, 100mV/step).
    Refer to AXP192 datasheet page 36 for details.
  fields:
    ldo2_voltage:
      base: uint
      start: 4
      end: 8
      description: "LDO2 voltage (0x0-0xF -> 1.8V-3.3V)"
    ldo3_voltage:
      base: uint
      start: 0
      end: 4
      description: "LDO3 voltage (0x0-0xF -> 1.8V-3.3V)"

ChargeControl1:
  type: register
  address: 0x33
  size_bits: 8
  access: RW
  reset_value: 0xC8
  description: |
    Charging control: enable, target voltage, end current, charge current.
    Refer to AXP192 datasheet page 37 for details.
  fields:
    charge_enable:
      base: bool
      start: 7
      description: "Charging function enable (0: Disable, 1: Enable)"
    target_voltage:
      base: uint
      start: 5
      end: 7
      conversion:
        name: ChargeTargetVoltage
        V4_10: 0b00
        V4_15: 0b01
        V4_20: 0b10
        V4_36: 0b11
      description: "Target voltage (00: 4.1V, 01: 4.15V, 10: 4.2V, 11: 4.36V)"
    end_charge_current_select:
      base: bool
      start: 4
      description: "End charge current (0: 10% of charge current, 1: 15%)"
    current:
      base: uint
      start: 0
      end: 4
      description: "Charge current (0000: 100mA .. 1111: 1320mA)"

PekSettings:
  type: register
  address: 0x36
  size_bits: 8
  access: RW
  reset_value: 0x5D
  description: |
    PEK button parameters: boot time, long press, auto-shutdown, PWROK delay, shutdown duration.
    Refer to AXP192 datasheet page 38 for details.
  fields:
    boot_time:
      base: uint
      start: 6
      end: 8
      conversion:
        name: PekBootTime
        S128ms: 0b00
        S512ms: 0b01
        S1: 0b10
        S2: 0b11
      description: "Boot time (00: 128ms, 01: 512ms, 10: 1s, 11: 2s)"
    long_press_time:
      base: uint
      start: 4
      end: 6
      conversion:
        name: PekLongPressTime
        Ms1000: 0b00
        Ms1500: 0b01
        Ms2000: 0b10
        Ms2500: 0b11
      description: "Long press time (00: 1s, 01: 1.5s, 10: 2s, 11: 2.5s)"
    auto_shutdown_on_long_press_enable:
      base: bool
      start: 3
      description: "Auto shutdown if PEK press > shutdown duration (0: Disable, 1: Enable)"
    pwrok_signal_delay_after_power_on:
      base: bool
      start: 2
      description: "PWROK signal delay after power-on (0: 32ms, 1: 64ms)"
    shutdown_duration:
      base: uint
      start: 0
      end: 2
      conversion:
        name: PekShutdownDuration
        S4: 0b00
        S6: 0b01
        S8: 0b10
        S10: 0b11
      description: "Shutdown duration setting (00: 4s, 01: 6s, 10: 8s, 11: 10s)"

EnableControl5:
  type: register
  address: 0x4A
  size_bits: 8
  access: RW
  reset_value: 0x00
  description: |
    Interrupt Enable Control 5.
    Refer to AXP192 datasheet page 49 for details.
  fields:
    timer_timeout_irq_en:
      base: bool
      start: 7
      description: "Timer timeout IRQ enable"
    gpio2_edge_trigger_irq_en:
      base: bool
      start: 2
      description: "GPIO2 edge trigger IRQ enable"
    gpio1_edge_trigger_irq_en:
      base: bool
      start: 1
      description: "GPIO1 edge trigger IRQ enable"
    gpio0_edge_trigger_irq_en:
      base: bool
      start: 0
      description: "GPIO0 edge trigger IRQ enable"

BatteryPowerAdc:
  type: register
  address: 0x70
  size_bits: 24
  access: RO
  byte_order: BE
  reset_value: 0x000000
  description: |
    Battery instantaneous power (Pbat=Val*1.1mV*0.5mA/1000).
    Refer to AXP192 datasheet page 32 for details.
  fields:
    raw:
      base: uint
      start: 0
      end: 24
      description: "Raw 24-bit value, use upper 23 bits"
