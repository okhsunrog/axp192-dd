config:
  register_address_type: u8
  command_address_type: u8
  buffer_address_type: u8
  default_byte_order: BE # For multi-byte registers like ADCs
  default_bit_order: LSB0 # Bit 0 is the least significant bit

# --- Power Control Registers (0x00 - 0x3D) ---
PowerStatus: # Reg 0x00
  type: register
  address: 0x00
  size_bits: 8
  access: RO
  description: "Input power status. (Datasheet pg 32)"
  fields:
    acin_present:
      { base: bool, start: 7, description: "ACIN presence (1: exist)" }
    acin_usable:
      { base: bool, start: 6, description: "ACIN usable (1: usable)" }
    vbus_present:
      { base: bool, start: 5, description: "VBUS presence (1: exist)" }
    vbus_usable:
      { base: bool, start: 4, description: "VBUS usable (1: usable)" }
    vbus_path_used_when_vbus_lt_vhold: # Renamed for clarity from vbus_path_select_status
      {
        base: bool,
        start: 3,
        description: "VBUS input path status when VBUS < VHOLD (0: not selected, 1: selected)",
      }
    battery_current_direction:
      {
        base: bool,
        start: 2,
        description: "Battery current (0: Discharging, 1: Charging)",
      }
    boot_source_acin_vbus: # Name was okay, just noting bit
      {
        base: bool,
        start: 1,
        description: "Boot source (0: from Battery, 1: from ACIN/VBUS)",
      }
    acin_vbus_short_circuit_indication: # Renamed for clarity from acin_vbus_short_to_gnd
      {
        base: bool,
        start: 0,
        description: "ACIN/VBUS short circuit indication (0: No, 1: Yes)",
      }

ChargeStatus: # Reg 0x01
  type: register
  address: 0x01
  size_bits: 8
  access: RO
  description: "Power mode and charging status. (Datasheet pg 33)"
  fields:
    over_temperature_indication: # Added from datasheet REG01H[7]
      { base: bool, start: 7, description: "AXP192 over-temperature (1: Yes)" }
    battery_charging_indication:
      { base: bool, start: 6, description: "Battery is charging (1: Yes)" }
    battery_present_status: # Renamed from battery_present_or_temp_ok
      {
        base: bool,
        start: 5,
        description: "Battery presence status (0: No battery, 1: Battery connected)",
      }
    battery_activation_mode_indication: # Added from datasheet REG01H[3]
      {
        base: bool,
        start: 3,
        description: "Battery in activation mode (1: Yes)",
      }
    charge_current_low_indication: # Added from datasheet REG01H[2]
      {
        base: bool,
        start: 2,
        description: "Charge current less than expected (1: Yes)",
      }
    axp192_startup_mode: # Added from datasheet REG01H[1]
      {
        base: bool,
        start: 1,
        description: "AXP192 startup mode (0: Mode A, 1: Mode B)",
      }

OtgVbusStatus: # Reg 0x04
  type: register
  address: 0x04
  size_bits: 8
  access: RO
  description: "USB OTG VBUS status. (Datasheet pg 33)"
  fields:
    vbus_valid_indication: # Renamed from otg_vbus_valid for clarity with datasheet
      {
        base: bool,
        start: 2,
        description: "Indicates VBUS is valid > VHOLD_VBUS (1: Valid)",
      }
    vbus_session_ab_valid_indication: # Renamed from session_ab_valid
      {
        base: bool,
        start: 1,
        description: "Indicates VBUS Session A/B valid (1: Valid)",
      }
    vbus_session_end_indication:
      {
        base: bool,
        start: 0,
        description: "Indicates VBUS Session End status (1: Session End)",
      }

DataBuffer0:
  {
    type: register,
    address: 0x06,
    size_bits: 8,
    access: RW,
    description: "Data Buffer 0",
  }
DataBuffer1:
  {
    type: register,
    address: 0x07,
    size_bits: 8,
    access: RW,
    description: "Data Buffer 1",
  }
DataBuffer2:
  {
    type: register,
    address: 0x08,
    size_bits: 8,
    access: RW,
    description: "Data Buffer 2",
  }
DataBuffer3:
  {
    type: register,
    address: 0x09,
    size_bits: 8,
    access: RW,
    description: "Data Buffer 3",
  }
DataBuffer4:
  {
    type: register,
    address: 0x0A,
    size_bits: 8,
    access: RW,
    description: "Data Buffer 4",
  }
DataBuffer5:
  {
    type: register,
    address: 0x0B,
    size_bits: 8,
    access: RW,
    description: "Data Buffer 5",
  }

ExtenDcdc2Control: # Reg 0x10
  type: register
  address: 0x10
  size_bits: 8
  access: RW
  description: "EXTEN and DC-DC2 enable control. (Datasheet pg 34)"
  fields:
    exten_enable:
      {
        base: bool,
        start: 2,
        description: "EXTEN output enable switch (0:Off, 1:On)",
      }
    dcdc2_enable:
      {
        base: bool,
        start: 0,
        description: "DC-DC2 output enable switch (0:Off, 1:On)",
      }

Dcdc13Ldo23Control: # Reg 0x12
  type: register
  address: 0x12
  size_bits: 8
  access: RW
  description: "Power output control for DCDC1/3, LDO2/3, EXTEN, DCDC2. (Datasheet pg 34)"
  fields:
    exten_enable_alt:
      { base: bool, start: 6, description: "EXTEN enable (0:Off, 1:On)" }
    dcdc2_enable_alt:
      { base: bool, start: 4, description: "DC-DC2 enable (0:Off, 1:On)" }
    ldo3_enable:
      { base: bool, start: 3, description: "LDO3 output enable (0:Off, 1:On)" }
    ldo2_enable:
      { base: bool, start: 2, description: "LDO2 output enable (0:Off, 1:On)" }
    dcdc3_enable:
      {
        base: bool,
        start: 1,
        description: "DC-DC3 output enable (0:Off, 1:On)",
      }
    dcdc1_enable:
      {
        base: bool,
        start: 0,
        description: "DC-DC1 output enable (0:Off, 1:On)",
      }

Dcdc2Voltage: # Reg 0x23
  type: register
  address: 0x23
  size_bits: 8
  access: RW
  description: "DC-DC2 output voltage setting (0.7-2.275V, 25mV/step). (Datasheet pg 34)"
  fields:
    setting:
      {
        base: uint,
        start: 0,
        end: 6,
        description: "Voltage setting bits (0-5 for 64 steps, 0x00-0x3F)",
      }

Dcdc2Slope: # Reg 0x25
  type: register
  address: 0x25
  size_bits: 8
  access: RW
  description: "DC-DC2 VRC (Voltage Ramp Control) slope control. (Datasheet pg 35)"
  fields:
    vrc_enable:
      {
        base: bool,
        start: 2,
        description: "DC-DC2 VRC enable (0:Enable, 1:Disable)",
      }
    vrc_slope_setting:
      {
        base: bool,
        start: 0,
        description: "DC-DC2 VRC slope (0:1.6mV/us, 1:0.8mV/us)",
      }

Dcdc1Voltage: # Reg 0x26
  type: register
  address: 0x26
  size_bits: 8
  access: RW
  description: "DC-DC1 output voltage setting (0.7-3.5V, 25mV/step). (Datasheet pg 35)"
  fields:
    setting:
      {
        base: uint,
        start: 0,
        end: 7,
        description: "Voltage setting bits (0-6 for 128 steps, 0x00-0x7F)",
      }

Dcdc3Voltage: # Reg 0x27
  type: register
  address: 0x27
  size_bits: 8
  access: RW
  description: "DC-DC3 output voltage setting (0.7-3.5V, 25mV/step). (Datasheet pg 35)"
  fields:
    setting:
      {
        base: uint,
        start: 0,
        end: 7,
        description: "Voltage setting bits (0-6 for 128 steps, 0x00-0x7F)",
      }

Ldo23Voltage: # Reg 0x28
  type: register
  address: 0x28
  size_bits: 8
  access: RW
  description: "LDO2/LDO3 output voltage settings (1.8-3.3V, 100mV/step). (Datasheet pg 36)"
  fields:
    ldo2_setting:
      {
        base: uint,
        start: 4,
        end: 8,
        description: "LDO2 voltage setting (0x00-0x0F -> 1.8V-3.3V)",
      }
    ldo3_setting:
      {
        base: uint,
        start: 0,
        end: 4,
        description: "LDO3 voltage setting (0x00-0x0F -> 1.8V-3.3V)",
      }

VbusIpsoutChannel: # Reg 0x30
  type: register
  address: 0x30
  size_bits: 8
  access: RW
  description: "VBUS-IPSOUT path management and VBUS VHOLD/current limit. (Datasheet pg 36)"
  fields:
    vbus_ipsout_path_override_nvbusen:
      {
        base: bool,
        start: 7,
        description: "VBUS-IPSOUT path selection (0:By N_VBUSEN, 1:Override, path open)",
      }
    vbus_vhold_limit_enable:
      {
        base: bool,
        start: 6,
        description: "VBUS VHOLD voltage limit control (0:No limit, 1:Limit to VHOLD)",
      }
    vhold_voltage_setting:
      {
        base: uint,
        start: 3,
        end: 6,
        description: "VHOLD voltage (000:4.0V .. 100:4.4V .. 111:4.7V)",
      }
    vbus_current_limit_enable:
      {
        base: bool,
        start: 1,
        description: "VBUS current limit control enable (0:Disable, 1:Enable)",
      }
    vbus_current_limit_value_select:
      {
        base: bool,
        start: 0,
        description: "VBUS current limit value (0:500mA, 1:100mA if enabled)",
      }

ShutdownVoltage: # Reg 0x31 - VOFF关机电压设置 (VOFF Shutdown Voltage Setting)
  type: register
  address: 0x31
  size_bits: 8
  access: RW
  description: "VOFF shutdown voltage and Sleep mode PWRON short press wakeup. (Datasheet pg 36)"
  fields:
    sleep_pwron_short_press_wakeup_enable:
      {
        base: bool,
        start: 3,
        description: "Sleep mode PWRON short press wakeup (0:Disable, 1:Enable, self-clearing)",
      }
    voff_setting:
      {
        base: uint,
        start: 0,
        end: 3,
        description: "VOFF shutdown voltage (000:2.6V .. 111:3.3V, 100mV/step)",
      }

ShutdownBatteryChgledControl: # Reg 0x32
  type: register
  address: 0x32
  size_bits: 8
  access: RW
  description: "Mode A Shutdown, Battery Detection, CHGLED Control. (Datasheet pg 37)"
  fields:
    mode_a_shutdown_control:
      {
        base: bool,
        start: 7,
        description: "Mode A Shutdown (1: Shutdown AXP192 outputs except LDO1)",
      }
    battery_detection_enable:
      {
        base: bool,
        start: 6,
        description: "Battery Monitoring Function (0:Disable, 1:Enable)",
      }
    chgled_pin_function_setting:
      {
        base: uint,
        start: 4,
        end: 6,
        description: "CHGLED Pin Function (00:Hi-Z,01:1Hz,10:4Hz,11:Low)",
      }
    chgled_pin_source_control:
      {
        base: bool,
        start: 3,
        description: "CHGLED Pin Control Source (0:By Charger, 1:By Bits[5-4] of this reg)",
      }
    n_oe_low_to_high_shutdown_delay:
      {
        base: uint,
        start: 0,
        end: 2,
        description: "N_OE Low-to-High Shutdown Delay (00:0.5S,01:1S,10:2S,11:3S)",
      }

ChargeControl1: # Reg 0x33
  type: register
  address: 0x33
  size_bits: 8
  access: RW
  description: "Charging control 1: enable, target voltage, end current, charge current. (Datasheet pg 37)"
  fields:
    charge_enable:
      {
        base: bool,
        start: 7,
        description: "Charging function enable (0:Disable, 1:Enable)",
      }
    charge_target_voltage_setting:
      {
        base: uint,
        start: 5,
        end: 7,
        description: "Target voltage (00:4.1V,01:4.15V,10:4.2V,11:4.36V)",
      }
    end_charge_current_select:
      {
        base: bool,
        start: 4,
        description: "End charge current (0: 10% of charge current, 1: 15%)",
      }
    charge_current_setting:
      {
        base: uint,
        start: 0,
        end: 4,
        description: "Charge current (0000:100mA .. 1111:1320mA)",
      }

ChargeControl2: # Reg 0x34
  type: register
  address: 0x34
  size_bits: 8
  access: RW
  description: "Charging control 2: pre-charge/constant current timeouts, external path. (Datasheet pg 38)"
  fields:
    precharge_timeout_setting:
      {
        base: uint,
        start: 6,
        end: 8,
        description: "Pre-charge timeout (00:30min .. 11:60min)",
      }
    external_path_charge_current_setting:
      {
        base: uint,
        start: 3,
        end: 6,
        description: "External path charge current (300-1000mA, 100mA/step, default 300mA)",
      }
    external_path_charge_enable:
      {
        base: bool,
        start: 2,
        description: "External path charge enable (0:Disable, 1:Enable)",
      }
    constant_current_timeout_setting:
      {
        base: uint,
        start: 0,
        end: 2,
        description: "Constant current timeout (00:7Hrs .. 11:10Hrs)",
      }

BatteryChargeControl: # Reg 0x35 - Backup Battery Charge Control
  type: register
  address: 0x35
  size_bits: 8
  access: RW
  description: "Backup battery charging control. (Datasheet pg 38)"
  fields:
    backup_battery_charge_enable:
      {
        base: bool,
        start: 7,
        description: "Backup battery charge enable (0:Disable, 1:Enable)",
      }
    backup_battery_target_voltage_setting:
      {
        base: uint,
        start: 5,
        end: 7,
        description: "Backup battery target voltage (00:3.1V,01/10:3.0V,11:2.5V)",
      }
    backup_battery_charge_current_setting:
      {
        base: uint,
        start: 0,
        end: 2,
        description: "Backup battery charge current (00:50uA,01:100uA,10:200uA,11:400uA)",
      }

PekSettings: # Reg 0x36
  type: register
  address: 0x36
  size_bits: 8
  access: RW
  description: "PEK button parameters: boot time, long press, auto-shutdown, PWROK delay, shutdown duration. (Datasheet pg 38)"
  fields:
    boot_time_setting:
      {
        base: uint,
        start: 6,
        end: 8,
        description: "Boot time (00:128mS,01:512mS,10:1S,11:2S)",
      }
    long_press_time_setting:
      {
        base: uint,
        start: 4,
        end: 6,
        description: "Long press time (00:1S,01:1.5S,10:2S,11:2.5S)",
      }
    auto_shutdown_on_long_press_enable: # Renamed from auto_shutdown_by_pwrok_en for clarity
      {
        base: bool,
        start: 3,
        description: "Auto shutdown if PEK press > shutdown duration (0:Disable, 1:Enable)",
      }
    pwrok_signal_delay_after_power_on:
      {
        base: bool,
        start: 2,
        description: "PWROK signal delay after power-on (0:32mS, 1:64mS)",
      }
    shutdown_duration_setting:
      {
        base: uint,
        start: 0,
        end: 2,
        description: "Shutdown duration setting (00:4S,01:6S,10:8S,11:10S)",
      }

DcdcFrequency: # Reg 0x37
  type: register
  address: 0x37
  size_bits: 8
  access: RW
  description: "DC-DC working frequency setting. (Datasheet pg 39)"
  fields:
    frequency_setting:
      {
        base: uint,
        start: 0,
        end: 4,
        description: "DC-DC frequency, each step 5%, default 1.5MHz (0b1000)",
      }

BatteryChargeLowTemp: # Reg 0x38
  type: register
  address: 0x38
  size_bits: 8
  access: RW
  description: "Battery charge low temperature threshold (VLTF-charge = M*16*0.8mV). (Datasheet pg 39)"
  fields:
    threshold_m_setting:
      { base: uint, start: 0, end: 8, description: "M setting for VLTF-charge" }

BatteryChargeHighTemp: # Reg 0x39
  type: register
  address: 0x39
  size_bits: 8
  access: RW
  description: "Battery charge high temperature threshold (VHTF-charge = N*16*0.8mV). (Datasheet pg 39)"
  fields:
    threshold_n_setting:
      { base: uint, start: 0, end: 8, description: "N setting for VHTF-charge" }

ApsLowPower1: # Reg 0x3A
  type: register
  address: 0x3A
  size_bits: 8
  access: RW
  description: "APS low power level 1 setting (Vwarning = 2.8672V + 1.4mV*N*4). (Datasheet pg 39, 40)"
  fields:
    level1_n_setting:
      {
        base: uint,
        start: 0,
        end: 8,
        description: "N setting for APS low power level 1",
      }

ApsLowPower2: # Reg 0x3B
  type: register
  address: 0x3B
  size_bits: 8
  access: RW
  description: "APS low power level 2 setting (Vwarning = 2.8672V + 1.4mV*N*4). (Datasheet pg 40)"
  fields:
    level2_n_setting:
      {
        base: uint,
        start: 0,
        end: 8,
        description: "N setting for APS low power level 2",
      }

BatteryDischargeLowTemp: # Reg 0x3C
  type: register
  address: 0x3C
  size_bits: 8
  access: RW
  description: "Battery discharge low temperature threshold (VLTF-discharge = M*16*0.8mV). (Datasheet pg 40)"
  fields:
    threshold_m_setting:
      {
        base: uint,
        start: 0,
        end: 8,
        description: "M setting for VLTF-discharge",
      }

BatteryDischargeHighTemp: # Reg 0x3D
  type: register
  address: 0x3D
  size_bits: 8
  access: RW
  description: "Battery discharge high temperature threshold (VHTF-discharge = N*16*0.8mV). (Datasheet pg 40)"
  fields:
    threshold_n_setting:
      {
        base: uint,
        start: 0,
        end: 8,
        description: "N setting for VHTF-discharge",
      }

# --- ADC and System Control (0x80 - 0x8F) ---
DcdcMode: # Reg 0x80
  type: register
  address: 0x80
  size_bits: 8
  access: RW
  description: "DC-DC working mode control. (Datasheet pg 40)"
  fields:
    dcdc1_mode_control:
      {
        base: bool,
        start: 3,
        description: "DC-DC1 mode (0:Auto PFM/PWM, 1:Fixed PWM)",
      }
    dcdc2_mode_control:
      {
        base: bool,
        start: 2,
        description: "DC-DC2 mode (0:Auto PFM/PWM, 1:Fixed PWM)",
      }
    dcdc3_mode_control:
      {
        base: bool,
        start: 1,
        description: "DC-DC3 mode (0:Auto PFM/PWM, 1:Fixed PWM)",
      }

AdcEnable1: # Reg 0x82
  type: register
  address: 0x82
  size_bits: 8
  access: RW
  description: "ADC enable control 1. (Datasheet pg 41)"
  fields:
    battery_voltage_adc_enable: { base: bool, start: 7 }
    battery_current_adc_enable: { base: bool, start: 6 }
    acin_voltage_adc_enable: { base: bool, start: 5 }
    acin_current_adc_enable: { base: bool, start: 4 }
    vbus_voltage_adc_enable: { base: bool, start: 3 }
    vbus_current_adc_enable: { base: bool, start: 2 }
    aps_voltage_adc_enable: { base: bool, start: 1 }
    ts_pin_adc_enable: { base: bool, start: 0 }

AdcEnable2: # Reg 0x83
  type: register
  address: 0x83
  size_bits: 8
  access: RW
  description: "ADC enable control 2. (Datasheet pg 41)"
  fields:
    internal_temp_adc_enable:
      {
        base: bool,
        start: 7,
        description: "AXP192 Internal Temperature ADC (0:Disable,1:Enable)",
      }
    gpio0_adc_enable:
      {
        base: bool,
        start: 3,
        description: "GPIO0 ADC function enable (0:Disable,1:Enable)",
      }
    gpio1_adc_enable:
      {
        base: bool,
        start: 2,
        description: "GPIO1 ADC function enable (0:Disable,1:Enable)",
      }
    gpio2_adc_enable:
      {
        base: bool,
        start: 1,
        description: "GPIO2 ADC function enable (0:Disable,1:Enable)",
      }
    gpio3_adc_enable:
      {
        base: bool,
        start: 0,
        description: "GPIO3 ADC function enable (0:Disable,1:Enable)",
      }

AdcRateTsPin: # Reg 0x84
  type: register
  address: 0x84
  size_bits: 8
  access: RW
  description: "ADC sample rate, TS pin current/mode control. (Datasheet pg 41)"
  fields:
    adc_sample_rate_setting:
      {
        base: uint,
        start: 6,
        end: 8,
        description: "ADC Sample Rate (00:25Hz,01:50Hz,10:100Hz,11:200Hz)",
      }
    ts_pin_output_current_setting:
      {
        base: uint,
        start: 4,
        end: 6,
        description: "TS Pin Output Current (00:20uA,01:40uA,10:60uA,11:80uA)",
      }
    ts_pin_function_select:
      {
        base: bool,
        start: 2,
        description: "TS Pin Function (0:Batt Temp Monitor, 1:External ADC input)",
      }
    ts_pin_current_output_mode:
      {
        base: uint,
        start: 0,
        end: 2,
        description: "TS Pin Current Output Mode (00:Off,01:Output during charge,10:ADC sample time,11:Always On)",
      }

Gpio30InputRange: # Reg 0x85
  type: register
  address: 0x85
  size_bits: 8
  access: RW
  description: "GPIO0-3 ADC input range setting. (Datasheet pg 42)"
  fields:
    gpio3_adc_input_range:
      {
        base: bool,
        start: 3,
        description: "GPIO3 ADC input range (0:0-2.0475V, 1:0.7-2.7475V)",
      }
    gpio2_adc_input_range:
      {
        base: bool,
        start: 2,
        description: "GPIO2 ADC input range (0:0-2.0475V, 1:0.7-2.7475V)",
      }
    gpio1_adc_input_range:
      {
        base: bool,
        start: 1,
        description: "GPIO1 ADC input range (0:0-2.0475V, 1:0.7-2.7475V)",
      }
    gpio0_adc_input_range:
      {
        base: bool,
        start: 0,
        description: "GPIO0 ADC input range (0:0-2.0475V, 1:0.7-2.7475V)",
      }

Gpio0AdcIrqRising: # Reg 0x86
  type: register
  address: 0x86
  size_bits: 8
  access: RW
  description: "GPIO0 ADC IRQ rising edge threshold (LSB = 8mV). (Datasheet pg 42)"
  fields:
    threshold: { base: uint, start: 0, end: 8 }

Gpio0AdcIrqFalling: # Reg 0x87
  type: register
  address: 0x87
  size_bits: 8
  access: RW
  description: "GPIO0 ADC IRQ falling edge threshold (LSB = 8mV). (Datasheet pg 42)"
  fields:
    threshold: { base: uint, start: 0, end: 8 }

TimerControl: # Reg 0x8A
  type: register
  address: 0x8A
  size_bits: 8
  access: RW
  description: "Timer control. (Datasheet pg 42)"
  fields:
    timer_timeout_flag:
      {
        base: bool,
        start: 7,
        description: "Timer timeout flag (1:Timeout, W1C)",
      }
    timer_value_setting:
      {
        base: uint,
        start: 0,
        end: 7,
        description: "Timer value in minutes (0 to disable)",
      }

VbusMonitor: # Reg 0x8B
  type: register
  address: 0x8B
  size_bits: 8
  access: RW
  description: "VBUS monitor SRP function control. (Datasheet pg 43)"
  fields:
    vbus_valid_threshold_setting:
      {
        base: uint,
        start: 4,
        end: 6,
        description: "VBUS Valid Threshold (00:4.0V .. 11:4.55V)",
      }
    vbus_valid_monitor_enable:
      {
        base: bool,
        start: 3,
        description: "VBUS Valid Monitor Enable (0:Disable,1:Enable)",
      }
    vbus_session_monitor_enable:
      {
        base: bool,
        start: 2,
        description: "VBUS Session Monitor Enable (0:Disable,1:Enable)",
      }
    vbus_discharge_function_enable:
      {
        base: bool,
        start: 1,
        description: "Discharge VBUS function (0:Disable,1:Enable)",
      }
    vbus_charge_function_enable:
      {
        base: bool,
        start: 0,
        description: "Charge VBUS function (0:Disable,1:Enable)",
      }

TempShutdownControl: # Reg 0x8F
  type: register
  address: 0x8F
  size_bits: 8
  access: RW
  description: "Over temperature shutdown control. (Datasheet pg 43)"
  fields:
    over_temp_shutdown_enable:
      {
        base: bool,
        start: 2,
        description: "AXP192 internal over-temp shutdown (0:Disable,1:Enable)",
      }

# --- GPIO Control Registers (0x90 - 0x9E) ---
Gpio0Control: # Reg 0x90
  type: register
  address: 0x90
  size_bits: 8
  access: RW
  description: "GPIO0 function setting. (Datasheet pg 43)"
  fields:
    mode:
      {
        base: uint,
        start: 0,
        end: 3,
        description: "GPIO0 func: 000:NMOS-OD, 001:Input, 010:LDOIO0, 100:ADC, 101:LowOut, 11x:Float",
      }

Gpio0Ldoio0Voltage: # Reg 0x91
  type: register
  address: 0x91
  size_bits: 8
  access: RW
  description: "GPIO0 LDO (LDOIO0) output voltage setting. (Datasheet pg 44)"
  fields:
    voltage_setting:
      {
        base: uint,
        start: 4,
        end: 8,
        description: "LDOIO0 voltage (0000:1.8V .. 1111:3.3V, 100mV/step)",
      }

Gpio1Control: # Reg 0x92
  type: register
  address: 0x92
  size_bits: 8
  access: RW
  description: "GPIO1 function setting. (Datasheet pg 44)"
  fields:
    mode:
      {
        base: uint,
        start: 0,
        end: 3,
        description: "GPIO1 func: 000:NMOS-OD, 001:Input, 010:PWM1, 100:ADC, 101:LowOut, 11x:Float",
      }

Gpio2Control: # Reg 0x93
  type: register
  address: 0x93
  size_bits: 8
  access: RW
  description: "GPIO2 function setting. (Datasheet pg 44)"
  fields:
    mode:
      {
        base: uint,
        start: 0,
        end: 3,
        description: "GPIO2 func: 000:NMOS-OD, 001:Input, 010:PWM2, 100:ADC, 101:LowOut, 11x:Float",
      }

Gpio20SignalStatus: # Reg 0x94
  type: register
  address: 0x94 # Hex address for REG94H
  size_bits: 8
  access: RW # The register itself can be R/W
  description: "GPIO[2:0] signal status (input read) and output level control (output write). (Datasheet pg 45)"
  fields:
    # Bit 7: Reserved
    gpio2_input_status: # Datasheet Bit 6
      {
        base: bool,
        start: 6,
        access: RO,
        description: "GPIO2 input status (Read Only)",
      }
    gpio1_input_status: # Datasheet Bit 5
      {
        base: bool,
        start: 5,
        access: RO,
        description: "GPIO1 input status (Read Only)",
      }
    gpio0_input_status: # Datasheet Bit 4
      {
        base: bool,
        start: 4,
        access: RO,
        description: "GPIO0 input status (Read Only)",
      }
    # Bit 3: Reserved
    gpio2_output_level: # Datasheet Bit 2, Renamed from gpio2_output_level_setting
      {
        base: bool,
        start: 2,
        access: RW, # Correctly RW based on datasheet
        description: "GPIO2 output level (0:Low, 1:Float/High)",
      }
    gpio1_output_level: # Datasheet Bit 1, Renamed from gpio1_output_level_setting
      {
        base: bool,
        start: 1,
        access: RW, # Correctly RW based on datasheet
        description: "GPIO1 output level (0:Low, 1:Float/High)",
      }
    gpio0_output_level: # Datasheet Bit 0, Renamed from gpio0_output_level_setting
      {
        base: bool,
        start: 0,
        access: RW, # Correctly RW based on datasheet
        description: "GPIO0 output level (0:Low, 1:Float/High)",
      }

Gpio43FunctionControl: # Reg 0x95
  type: register
  address: 0x95
  size_bits: 8
  access: RW
  description: "GPIO[4:3] function control. (Datasheet pg 45)"
  fields:
    enable_gpio34_control_overall:
      {
        base: bool,
        start: 7,
        description: "GPIO[4:3] control enable (1: Use settings below)",
      }
    gpio4_mode_setting:
      {
        base: uint,
        start: 2,
        end: 4,
        description: "GPIO4 func (00:Ext CHG, 01:NMOS-OD, 10:Input, 11:Undefined)",
      }
    gpio3_mode_setting:
      {
        base: uint,
        start: 0,
        end: 2,
        description: "GPIO3 func (00:Ext CHG, 01:NMOS-OD, 10:Input, 11:ADC)",
      }

Gpio43SignalStatus: # Reg 0x96
  type: register
  address: 0x96 # Hex address for REG96H
  size_bits: 8
  access: RW # The register itself can be R/W
  description: "GPIO[4:3] signal status (input read) and output level control (output write). (Datasheet pg 45)"
  fields:
    # Bits 7-6: Reserved
    gpio4_input_status: # Datasheet Bit 5
      {
        base: bool,
        start: 5,
        access: RO,
        description: "GPIO4 input status (Read Only)",
      }
    gpio3_input_status: # Datasheet Bit 4
      {
        base: bool,
        start: 4,
        access: RO,
        description: "GPIO3 input status (Read Only)",
      }
    # Bits 3-2: Reserved
    gpio4_output_level: # Datasheet Bit 1, Renamed from gpio4_output_level_setting
      {
        base: bool,
        start: 1,
        access: RW, # Correctly RW based on datasheet
        description: "GPIO4 output level (0:Low, 1:Float/High)",
      }
    gpio3_output_level: # Datasheet Bit 0, Renamed from gpio3_output_level_setting
      {
        base: bool,
        start: 0,
        access: RW, # Correctly RW based on datasheet
        description: "GPIO3 output level (0:Low, 1:Float/High)",
      }

Gpio20PulldownControl: # Reg 0x97
  type: register
  address: 0x97
  size_bits: 8
  access: RW
  description: "GPIO[2:0] input mode pulldown resistor control. (Datasheet pg 46)"
  fields:
    gpio2_pulldown_enable:
      {
        base: bool,
        start: 2,
        description: "GPIO2 pulldown enable (0:Disable, 1:Enable)",
      }
    gpio1_pulldown_enable:
      {
        base: bool,
        start: 1,
        description: "GPIO1 pulldown enable (0:Disable, 1:Enable)",
      }
    gpio0_pulldown_enable:
      {
        base: bool,
        start: 0,
        description: "GPIO0 pulldown enable (0:Disable, 1:Enable)",
      }

Pwm1Frequency: # Reg 0x98
  type: register
  address: 0x98
  size_bits: 8
  access: RW
  description: "PWM1 frequency setting X. (Datasheet pg 46)"
  fields:
    frequency_x_setting: { base: uint, start: 0, end: 8 }

Pwm1DutyCycle1: # Reg 0x99
  type: register
  address: 0x99
  size_bits: 8
  access: RW
  description: "PWM1 duty cycle setting Y1 (MSBs). (Datasheet pg 46)"
  fields:
    duty_y1_setting: { base: uint, start: 0, end: 8 }

Pwm1DutyCycle2: # Reg 0x9A
  type: register
  address: 0x9A
  size_bits: 8
  access: RW
  description: "PWM1 duty cycle setting Y2 (LSBs). (Datasheet pg 46)"
  fields:
    duty_y2_setting: { base: uint, start: 0, end: 6 }

Pwm2Frequency: # Reg 0x9B
  type: register
  address: 0x9B
  size_bits: 8
  access: RW
  description: "PWM2 frequency setting X. (Datasheet pg 47)"
  fields:
    frequency_x_setting: { base: uint, start: 0, end: 8 }

Pwm2DutyCycle1: # Reg 0x9C
  type: register
  address: 0x9C
  size_bits: 8
  access: RW
  description: "PWM2 duty cycle setting Y1 (MSBs). (Datasheet pg 47)"
  fields:
    duty_y1_setting: { base: uint, start: 0, end: 8 }

Pwm2DutyCycle2: # Reg 0x9D
  type: register
  address: 0x9D
  size_bits: 8
  access: RW
  description: "PWM2 duty cycle setting Y2 (LSBs). (Datasheet pg 47)"
  fields:
    duty_y2_setting: { base: uint, start: 0, end: 6 }

NRstoGpio5Control: # Reg 0x9E
  type: register
  address: 0x9E
  size_bits: 8
  access: RW
  description: "N_RSTO (Reset Out) / GPIO5 function control. (Datasheet pg 47)"
  fields:
    n_rsto_gpio5_function_select:
      {
        base: bool,
        start: 7,
        description: "Function (0:N_RSTO LDO1 monitor, 1:GPIO5)",
      }
    n_rsto_gpio5_output_mode:
      {
        base: bool,
        start: 6,
        description: "Output mode if GPIO5 (0:NMOS-OD, 1:Input)",
      }
    n_rsto_gpio5_output_level:
      {
        base: bool,
        start: 5,
        description: "Output level if GPIO5 NMOS-OD (0:Low, 1:Float)",
      }
    n_rsto_gpio5_input_status:
      {
        base: bool,
        start: 4,
        access: RO,
        description: "Input status if GPIO5 Input (Read Only)",
      }

# --- Interrupt Control Registers (0x40 - 0x4D) ---
EnableControl1: # Reg 0x40
  type: register
  address: 0x40
  size_bits: 8
  access: RW
  description: "Interrupt Enable Control 1. (Datasheet pg 48)"
  fields:
    acin_over_voltage_irq_en: { base: bool, start: 7 }
    acin_insertion_irq_en: { base: bool, start: 6 }
    acin_removal_irq_en: { base: bool, start: 5 }
    vbus_over_voltage_irq_en: { base: bool, start: 4 }
    vbus_insertion_irq_en: { base: bool, start: 3 }
    vbus_removal_irq_en: { base: bool, start: 2 }
    vbus_lt_vhold_irq_en: { base: bool, start: 1 }

EnableControl2: # Reg 0x41
  type: register
  address: 0x41
  size_bits: 8
  access: RW
  description: "Interrupt Enable Control 2. (Datasheet pg 48)"
  fields:
    battery_insertion_irq_en: { base: bool, start: 7 }
    battery_removal_irq_en: { base: bool, start: 6 }
    battery_activation_mode_irq_en: { base: bool, start: 5 }
    battery_exit_activation_mode_irq_en: { base: bool, start: 4 }
    charging_irq_en: { base: bool, start: 3 }
    charge_finished_irq_en: { base: bool, start: 2 }
    battery_over_temp_irq_en: { base: bool, start: 1 }
    battery_low_temp_irq_en: { base: bool, start: 0 }

EnableControl3: # Reg 0x42
  type: register
  address: 0x42
  size_bits: 8
  access: RW
  description: "Interrupt Enable Control 3. (Datasheet pg 48)"
  fields:
    internal_over_temp_irq_en: { base: bool, start: 7 }
    charge_current_lt_expected_irq_en: { base: bool, start: 6 }
    dcdc1_low_voltage_irq_en: { base: bool, start: 5 }
    dcdc2_low_voltage_irq_en: { base: bool, start: 4 }
    dcdc3_low_voltage_irq_en: { base: bool, start: 3 }
    pek_short_press_irq_en: { base: bool, start: 1 }
    pek_long_press_irq_en: { base: bool, start: 0 }

EnableControl4: # Reg 0x43
  type: register
  address: 0x43
  size_bits: 8
  access: RW
  description: "Interrupt Enable Control 4. (Datasheet pg 49)"
  fields:
    n_oe_power_on_irq_en: { base: bool, start: 7 }
    n_oe_power_off_irq_en: { base: bool, start: 6 }
    vbus_valid_irq_en: { base: bool, start: 5 }
    vbus_invalid_irq_en: { base: bool, start: 4 }
    vbus_session_ab_irq_en: { base: bool, start: 3 }
    vbus_session_end_irq_en: { base: bool, start: 2 }
    aps_low_power_irq_en: { base: bool, start: 0 }

EnableControl5: # Reg 0x4A
  type: register
  address: 0x4A
  size_bits: 8
  access: RW
  description: "Interrupt Enable Control 5. (Datasheet pg 49)"
  fields:
    timer_timeout_irq_en: { base: bool, start: 7 }
    gpio2_edge_trigger_irq_en: { base: bool, start: 2 }
    gpio1_edge_trigger_irq_en: { base: bool, start: 1 }
    gpio0_edge_trigger_irq_en: { base: bool, start: 0 }

IrqStatus1: # Reg 0x44
  type: register
  address: 0x44
  size_bits: 8
  access: RW # W1C
  description: "Interrupt Status 1 (Write 1 to clear respective IRQ). (Datasheet pg 49)"
  fields:
    acin_over_voltage_irq_status: { base: bool, start: 7 }
    acin_insertion_irq_status: { base: bool, start: 6 }
    acin_removal_irq_status: { base: bool, start: 5 }
    vbus_over_voltage_irq_status: { base: bool, start: 4 }
    vbus_insertion_irq_status: { base: bool, start: 3 }
    vbus_removal_irq_status: { base: bool, start: 2 }
    vbus_lt_vhold_irq_status: { base: bool, start: 1 }

IrqStatus2: # Reg 0x45
  type: register
  address: 0x45
  size_bits: 8
  access: RW # W1C
  description: "Interrupt Status 2. (Datasheet pg 50)"
  fields:
    battery_insertion_irq_status: { base: bool, start: 7 }
    battery_removal_irq_status: { base: bool, start: 6 }
    battery_activation_mode_irq_status: { base: bool, start: 5 }
    battery_exit_activation_mode_irq_status: { base: bool, start: 4 }
    charging_irq_status: { base: bool, start: 3 }
    charge_finished_irq_status: { base: bool, start: 2 }
    battery_over_temp_irq_status: { base: bool, start: 1 }
    battery_low_temp_irq_status: { base: bool, start: 0 }

IrqStatus3: # Reg 0x46
  type: register
  address: 0x46
  size_bits: 8
  access: RW # W1C
  description: "Interrupt Status 3. (Datasheet pg 50)"
  fields:
    internal_over_temp_irq_status: { base: bool, start: 7 }
    charge_current_lt_expected_irq_status: { base: bool, start: 6 }
    dcdc1_low_voltage_irq_status: { base: bool, start: 5 }
    dcdc2_low_voltage_irq_status: { base: bool, start: 4 }
    dcdc3_low_voltage_irq_status: { base: bool, start: 3 }
    pek_short_press_irq_status: { base: bool, start: 1 }
    pek_long_press_irq_status: { base: bool, start: 0 }

IrqStatus4: # Reg 0x47
  type: register
  address: 0x47
  size_bits: 8
  access: RW # W1C
  description: "Interrupt Status 4. (Datasheet pg 50)"
  fields:
    n_oe_power_on_irq_status: { base: bool, start: 7 }
    n_oe_power_off_irq_status: { base: bool, start: 6 }
    vbus_valid_irq_status: { base: bool, start: 5 }
    vbus_invalid_irq_status: { base: bool, start: 4 }
    vbus_session_ab_irq_status: { base: bool, start: 3 }
    vbus_session_end_irq_status: { base: bool, start: 2 }
    aps_low_power_irq_status: { base: bool, start: 0 }

IrqStatus5: # Reg 0x4D
  type: register
  address: 0x4D
  size_bits: 8
  access: RW # W1C
  description: "Interrupt Status 5. (Datasheet pg 51)"
  fields:
    timer_timeout_irq_status: { base: bool, start: 7 }
    gpio2_edge_trigger_irq_status: { base: bool, start: 2 }
    gpio1_edge_trigger_irq_status: { base: bool, start: 1 }
    gpio0_edge_trigger_irq_status: { base: bool, start: 0 }

# --- ADC Data Registers (0x56 - 0x7E, multi-byte, BE) ---
AcinVoltageAdc:
  {
    type: register,
    address: 0x56,
    size_bits: 16,
    access: RO,
    byte_order: BE,
    fields: { raw: { base: uint, start: 0, end: 16 } },
    description: "ACIN Voltage ADC (1.7mV/LSB). (Datasheet pg 26, 31)",
  }
AcinCurrentAdc:
  {
    type: register,
    address: 0x58,
    size_bits: 16,
    access: RO,
    byte_order: BE,
    fields: { raw: { base: uint, start: 0, end: 16 } },
    description: "ACIN Current ADC (0.625mA/LSB). (Datasheet pg 26, 31)",
  }
VbusVoltageAdc:
  {
    type: register,
    address: 0x5A,
    size_bits: 16,
    access: RO,
    byte_order: BE,
    fields: { raw: { base: uint, start: 0, end: 16 } },
    description: "VBUS Voltage ADC (1.7mV/LSB). (Datasheet pg 26, 31)",
  }
VbusCurrentAdc:
  {
    type: register,
    address: 0x5C,
    size_bits: 16,
    access: RO,
    byte_order: BE,
    fields: { raw: { base: uint, start: 0, end: 16 } },
    description: "VBUS Current ADC (0.375mA/LSB). (Datasheet pg 26, 31)",
  }
InternalTemperatureAdc:
  {
    type: register,
    address: 0x5E,
    size_bits: 16,
    access: RO,
    byte_order: BE,
    fields: { raw: { base: uint, start: 0, end: 16 } },
    description: "Internal Temperature ADC (0.1C/LSB, offset -144.7C). (Datasheet pg 26, 31)",
  }
TsInputAdc:
  {
    type: register,
    address: 0x62,
    size_bits: 16,
    access: RO,
    byte_order: BE,
    fields: { raw: { base: uint, start: 0, end: 16 } },
    description: "TS Pin ADC (0.8mV/LSB). (Datasheet pg 26, 31)",
  }
Gpio0VoltageAdc:
  {
    type: register,
    address: 0x64,
    size_bits: 16,
    access: RO,
    byte_order: BE,
    fields: { raw: { base: uint, start: 0, end: 16 } },
    description: "GPIO0 Voltage ADC (0.5mV/LSB). (Datasheet pg 26, 31)",
  }
Gpio1VoltageAdc:
  {
    type: register,
    address: 0x66,
    size_bits: 16,
    access: RO,
    byte_order: BE,
    fields: { raw: { base: uint, start: 0, end: 16 } },
    description: "GPIO1 Voltage ADC (0.5mV/LSB). (Datasheet pg 26, 31)",
  }
Gpio2VoltageAdc:
  {
    type: register,
    address: 0x68,
    size_bits: 16,
    access: RO,
    byte_order: BE,
    fields: { raw: { base: uint, start: 0, end: 16 } },
    description: "GPIO2 Voltage ADC (0.5mV/LSB). (Datasheet pg 26, 31)",
  }
Gpio3VoltageAdc:
  {
    type: register,
    address: 0x6A,
    size_bits: 16,
    access: RO,
    byte_order: BE,
    fields: { raw: { base: uint, start: 0, end: 16 } },
    description: "GPIO3 Voltage ADC (0.5mV/LSB). (Datasheet pg 26, 31)",
  }

BatteryPowerAdc: # Reg 0x70-0x72
  type: register
  address: 0x70
  size_bits: 24
  access: RO
  byte_order: BE
  description: "Battery instantaneous power (Pbat=Val*1.1mV*0.5mA/1000). (Datasheet pg 32)"
  fields:
    raw:
      {
        base: uint,
        start: 0,
        end: 24,
        description: "Raw 24-bit value, use upper 23 bits",
      }

BatteryVoltageAdc:
  {
    type: register,
    address: 0x78,
    size_bits: 16,
    access: RO,
    byte_order: BE,
    fields: { raw: { base: uint, start: 0, end: 16 } },
    description: "Battery Voltage ADC (1.1mV/LSB). (Datasheet pg 26, 32)",
  }
ChargeCurrentAdc:
  {
    type: register,
    address: 0x7A,
    size_bits: 16,
    access: RO,
    byte_order: BE,
    fields: { raw: { base: uint, start: 0, end: 16 } },
    description: "Battery Charge Current ADC (0.5mA/LSB). (Datasheet pg 26, 32)",
  }
DischargeCurrentAdc:
  {
    type: register,
    address: 0x7C,
    size_bits: 16,
    access: RO,
    byte_order: BE,
    fields: { raw: { base: uint, start: 0, end: 16 } },
    description: "Battery Discharge Current ADC (0.5mA/LSB). (Datasheet pg 26, 32)",
  }
ApsVoltageAdc:
  {
    type: register,
    address: 0x7E,
    size_bits: 16,
    access: RO,
    byte_order: BE,
    fields: { raw: { base: uint, start: 0, end: 16 } },
    description: "APS Voltage ADC (1.4mV/LSB). (Datasheet pg 26, 32)",
  }

# --- Coulomb Counter Registers (0xB0 - 0xB8) ---
ChargeCoulombCounter: # Reg 0xB0-0xB3
  type: register
  address: 0xB0
  size_bits: 32
  access: RO
  byte_order: BE
  description: "Charge coulomb counter value. (Datasheet pg 32)"
  fields:
    raw: { base: uint, start: 0, end: 32 }

DischargeCoulombCounter: # Reg 0xB4-0xB7
  type: register
  address: 0xB4
  size_bits: 32
  access: RO
  byte_order: BE
  description: "Discharge coulomb counter value. (Datasheet pg 32)"
  fields:
    raw: { base: uint, start: 0, end: 32 }

CoulombCounterControl: # Reg 0xB8
  type: register
  address: 0xB8
  size_bits: 8
  access: RW
  description: "Coulomb counter control. (Datasheet pg 51)"
  fields:
    enable:
      { base: bool, start: 7, description: "Coulomb counter enable (1:Enable)" }
    suspend:
      {
        base: bool,
        start: 6,
        description: "Coulomb counter suspend (1:Suspend, self-clearing)",
      }
    clear:
      {
        base: bool,
        start: 5,
        description: "Coulomb counter clear (1:Clear, self-clearing)",
      }
